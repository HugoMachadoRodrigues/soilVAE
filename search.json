[{"path":"https://hugomachadorodrigues.github.io/soilVAE/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Hugo Rodrigues Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"packages","dir":"Articles","previous_headings":"","what":"Packages","title":"soilVAE workflow","text":"","code":"# IMPORTANT: do NOT use devtools in vignettes (it is not available on CRAN/CI runners). # Only load packages that are in Imports/Suggests.  for (p in c(\"prospectr\", \"pls\", \"reticulate\", \"soilVAE\")) {   if (!requireNamespace(p, quietly = TRUE)) {     stop(\"Package '\", p, \"' is required to build this vignette. \",          \"Please install it (it should be installed automatically from Suggests/Imports during checks).\")   } }  library(prospectr) library(pls) library(reticulate) library(soilVAE)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"soilVAE workflow","text":"","code":"data(\"datsoilspc\", package = \"soilVAE\") str(datsoilspc, max.level = 1) #> 'data.frame':    391 obs. of  5 variables: #>  $ clay       : num  49 7 56 14 53 24 9 18 33 27 ... #>  $ silt       : num  10 24 17 19 7 21 9 20 13 19 ... #>  $ sand       : num  42 69 27 67 40 55 83 61 54 55 ... #>  $ TotalCarbon: num  0.15 0.12 0.17 1.06 0.69 2.76 0.66 1.36 0.19 0.16 ... #>  $ spc        : num [1:391, 1:2151] 0.0898 0.1677 0.0778 0.0958 0.0359 ... #>   ..- attr(*, \"dimnames\")=List of 2 #>  - attr(*, \"na.action\")= 'omit' Named int 392 #>   ..- attr(*, \"names\")= chr \"63\""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"utility-evaluation-metrics-base-r","dir":"Articles","previous_headings":"","what":"Utility: evaluation metrics (base R)","title":"soilVAE workflow","text":"","code":"eval_quant <- function(y, yhat) {   y <- as.numeric(y); yhat <- as.numeric(yhat)   ok <- is.finite(y) & is.finite(yhat)   y <- y[ok]; yhat <- yhat[ok]    if (length(y) < 3) {     return(list(n = length(y), ME = NA_real_, MAE = NA_real_, RMSE = NA_real_,                 R2 = NA_real_, RPIQ = NA_real_, RPD = NA_real_))   }    err <- yhat - y   me <- mean(err)   mae <- mean(abs(err))   rmse <- sqrt(mean(err^2))    ss_res <- sum((y - yhat)^2)   ss_tot <- sum((y - mean(y))^2)   r2 <- if (ss_tot == 0) NA_real_ else 1 - ss_res / ss_tot    rpiq <- stats::IQR(y) / rmse   rpd  <- stats::sd(y) / rmse    list(n = length(y), ME = me, MAE = mae, RMSE = rmse, R2 = r2, RPIQ = rpiq, RPD = rpd) }  as_df_metrics <- function(x) {   data.frame(     n = x$n,     ME = round(x$ME, 2),     MAE = round(x$MAE, 2),     RMSE = round(x$RMSE, 2),     R2 = round(x$R2, 2),     RPIQ = round(x$RPIQ, 2),     RPD = round(x$RPD, 2),     stringsAsFactors = FALSE   ) }"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"spectra-preprocessing-reflectance-absorbance-resample-snv-movav","dir":"Articles","previous_headings":"","what":"Spectra preprocessing (reflectance ‚Üí absorbance ‚Üí resample ‚Üí SNV ‚Üí movav)","title":"soilVAE workflow","text":"Preprocessed spectra (SNV + movav)","code":"# Reflectance ‚Üí absorbance spcA <- log(1 / as.matrix(datsoilspc$spc))  # Resample to 5 nm oldWavs <- as.numeric(colnames(spcA)) newWavs <- seq(min(oldWavs), max(oldWavs), by = 5)  spcARs <- prospectr::resample(   X = spcA,   wav = oldWavs,   new.wav = newWavs,   interpol = \"linear\" )  # SNV + moving average spcASnv   <- prospectr::standardNormalVariate(spcARs) spcAMovav <- prospectr::movav(spcASnv, w = 11)  # Store in object to match book-style workflows datsoilspc$spcAMovav <- spcAMovav matplot(   x = as.numeric(colnames(datsoilspc$spcAMovav)),   y = t(datsoilspc$spcAMovav),   xlab = \"Wavelength / nm\",   ylab = \"Absorbance (SNV + movav)\",   type = \"l\", lty = 1,   col = rgb(0.5, 0.5, 0.5, alpha = 0.25) )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"split-calibration-datc-vs-test-datv","dir":"Articles","previous_headings":"","what":"Split: calibration (datC) vs test (datV)","title":"soilVAE workflow","text":"","code":"set.seed(19101991) calId <- sample(seq_len(nrow(datsoilspc)), size = round(0.75 * nrow(datsoilspc)))  datC <- datsoilspc[calId, ] datV <- datsoilspc[-calId, ]"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"baseline-pls-train-on-datc-evaluate-on-datv","dir":"Articles","previous_headings":"","what":"Baseline: PLS (train on datC, evaluate on datV)","title":"soilVAE workflow","text":"PLS CV performance","code":"maxc <- 30 pls_fit <- pls::plsr(   TotalCarbon ~ spcAMovav,   data = datC,   method = \"oscorespls\",   ncomp = maxc,   validation = \"CV\" )  plot(pls_fit, \"val\", main = \"PLS CV performance\", xlab = \"Number of components\") nc <- 14  pls_pred_C <- as.numeric(predict(pls_fit, ncomp = nc, newdata = datC$spcAMovav)) pls_pred_V <- as.numeric(predict(pls_fit, ncomp = nc, newdata = datV$spcAMovav))  pls_cal <- eval_quant(datC$TotalCarbon, pls_pred_C) pls_tst <- eval_quant(datV$TotalCarbon, pls_pred_V)  rbind(   cbind(Model = \"PLS\", Split = \"Calibration (datC)\", as_df_metrics(pls_cal)),   cbind(Model = \"PLS\", Split = \"TEST (datV)\",        as_df_metrics(pls_tst)) ) #>   Model              Split   n   ME  MAE RMSE   R2 RPIQ  RPD #> 1   PLS Calibration (datC) 293 0.00 0.37 0.56 0.86 2.04 2.63 #> 2   PLS        TEST (datV)  98 0.02 0.36 0.52 0.69 2.34 1.81"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"soilvae-supervised-vae-regression-skips-automatically-if-tfkeras-unavailable","dir":"Articles","previous_headings":"","what":"soilVAE: supervised VAE regression (skips automatically if TF/Keras unavailable)","title":"soilVAE workflow","text":"","code":"has_py <- reticulate::py_available(initialize = FALSE) has_tf <- FALSE if (has_py) {   try(reticulate::py_config(), silent = TRUE)   has_tf <- reticulate::py_module_available(\"tensorflow\") &&             reticulate::py_module_available(\"keras\") }  has_py #> [1] FALSE has_tf #> [1] FALSE"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"prepare-matrices-scale-x-using-train-stats-keep-y-in-original-units","dir":"Articles","previous_headings":"soilVAE: supervised VAE regression (skips automatically if TF/Keras unavailable)","what":"Prepare matrices (scale X using train stats; keep y in original units)","title":"soilVAE workflow","text":"","code":"# Predictors X_tr <- scale(as.matrix(datC$spcAMovav)) X_center <- attr(X_tr, \"scaled:center\") X_scale  <- attr(X_tr, \"scaled:scale\") X_te <- scale(as.matrix(datV$spcAMovav), center = X_center, scale = X_scale)  # Target (no transform, keep original units like the PLS baseline) y_tr <- as.numeric(datC$TotalCarbon) y_te <- as.numeric(datV$TotalCarbon)  dim(X_tr) #> [1] 293 421 length(y_tr) #> [1] 293"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"fit-and-evaluate-only-runs-when-tfkeras-is-available","dir":"Articles","previous_headings":"soilVAE: supervised VAE regression (skips automatically if TF/Keras unavailable)","what":"Fit and evaluate (only runs when TF/Keras is available)","title":"soilVAE workflow","text":"","code":"# If needed, pin an env *before* importing TF/Keras: # soilVAE::vae_configure(conda = \"soilvae-tf\")  # Internal split from datC -> train/val for early stopping + model selection set.seed(19101991) idx <- seq_len(nrow(X_tr)) val_id <- sample(idx, size = max(1L, round(0.20 * length(idx)))) tr_id  <- setdiff(idx, val_id)  X_int_tr <- X_tr[tr_id, , drop = FALSE] y_int_tr <- y_tr[tr_id]  X_int_va <- X_tr[val_id, , drop = FALSE] y_int_va <- y_tr[val_id]  # A small-but-useful grid grid_vae <- data.frame(   latent_dim = c(8L, 16L, 32L, 64L),   dropout    = c(0.2, 0.3),   lr         = c(5e-4),   beta_kl    = c(0.01),   alpha_y    = c(5),   epochs     = c(500L),   batch_size = c(64L, 128L),   patience   = c(50L),   stringsAsFactors = FALSE ) grid_vae$hidden_enc <- list(c(512L, 256L, 128L)) grid_vae$hidden_dec <- list(c(128L, 256L, 512L))  tuned <- soilVAE::tune_vae_train_val(   X_tr = X_int_tr, y_tr = y_int_tr,   X_va = X_int_va, y_va = y_int_va,   seed = 19101991,   grid_vae = grid_vae )  best <- soilVAE::select_best_from_grid(tuned$tuning_df, selection_metric = \"euclid\") cfg <- best$best  m <- soilVAE::vae_build(   input_dim  = ncol(X_tr),   hidden_enc = as.integer(strsplit(cfg$hidden_enc_str, \"-\")[[1]]),   hidden_dec = as.integer(strsplit(cfg$hidden_dec_str, \"-\")[[1]]),   latent_dim = as.integer(cfg$latent_dim),   dropout    = as.numeric(cfg$dropout),   lr         = as.numeric(cfg$lr),   beta_kl    = as.numeric(cfg$beta_kl),   alpha_y    = as.numeric(cfg$alpha_y) )  soilVAE::vae_fit(   model = m,   X = X_int_tr, y = y_int_tr,   X_val = X_int_va, y_val = y_int_va,   epochs = as.integer(cfg$epochs),   batch_size = as.integer(cfg$batch_size),   patience = as.integer(cfg$patience),   verbose = 0L )  # Predict on: internal train, internal val, and external TEST (datV) yhat_int_tr <- soilVAE::vae_predict(m, X_int_tr) yhat_int_va <- soilVAE::vae_predict(m, X_int_va) yhat_te     <- soilVAE::vae_predict(m, X_te)  vae_tr <- eval_quant(y_int_tr, yhat_int_tr) vae_va <- eval_quant(y_int_va, yhat_int_va) vae_te <- eval_quant(y_te, yhat_te)  rbind(   cbind(Model = \"soilVAE\", Split = \"Train (internal)\", as_df_metrics(vae_tr)),   cbind(Model = \"soilVAE\", Split = \"Val (internal)\",   as_df_metrics(vae_va)),   cbind(Model = \"soilVAE\", Split = \"TEST (datV)\",      as_df_metrics(vae_te)) )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/articles/soilVAE-workflow.html","id":"final-comparison-table-pls-vs-soilvae","dir":"Articles","previous_headings":"","what":"Final comparison table (PLS vs soilVAE)","title":"soilVAE workflow","text":"","code":"tab <- rbind(   cbind(Model = \"PLS\",    Split = \"Calibration (datC)\", as_df_metrics(pls_cal)),   cbind(Model = \"PLS\",    Split = \"TEST (datV)\",        as_df_metrics(pls_tst)),   cbind(Model = \"soilVAE\",Split = \"Train (internal)\",   as_df_metrics(vae_tr)),   cbind(Model = \"soilVAE\",Split = \"Val (internal)\",     as_df_metrics(vae_va)),   cbind(Model = \"soilVAE\",Split = \"TEST (datV)\",        as_df_metrics(vae_te)) )  row.names(tab) <- NULL tab"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Hugo Rodrigues. Author, maintainer.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Rodrigues H (2026). soilVAE: Supervised Variational Autoencoder regression high-dimensional predictors. R package version 0.1.0, https://hugomachadorodrigues.github.io/soilVAE/.","code":"@Manual{,   title = {soilVAE: Supervised Variational Autoencoder regression for high-dimensional predictors},   author = {Hugo Rodrigues},   year = {2026},   note = {R package version 0.1.0},   url = {https://hugomachadorodrigues.github.io/soilVAE/}, }"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"soilvae-","dir":"","previous_headings":"","what":"soilVAE","title":"soilVAE","text":"Supervised Variational Autoencoder (VAE) regression high‚Äëdimensional predictors (e.g., VIS‚ÄìNIR‚ÄìSWIR soil spectroscopy), implemented Python TensorFlow/Keras exposed R via reticulate. README also main reproducible case study, mirroring vignette (vignettes/soilVAE-workflow.Rmd) reader can understand , , performance without opening additional files.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"what-soilvae-does","dir":"","previous_headings":"","what":"What soilVAE does","title":"soilVAE","text":"Given spectra x‚àà‚Ñùpx\\\\mathbb{R}^p continuous soil property y‚àà‚Ñùy\\\\mathbb{R}, soilVAE learns: encoder qœï(z‚à£x)q_\\phi(z\\mid x) mapping spectra latent embedding z‚àà‚Ñùdz\\\\mathbb{R}^d decoder pŒ∏(x‚à£z)p_\\theta(x\\mid z) reconstructing spectra supervised head yÃÇ=fœà(z)\\hat y = f_\\psi(z) predicting property","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"objective-supervised-beta-vae","dir":"","previous_headings":"What soilVAE does","what":"Objective (supervised Œ≤\\beta-VAE)","title":"soilVAE","text":"minimize weighted sum: ‚Ñí(x,y)=‚à•x‚àíxÃÇ‚à•22‚èüreconstruction+Œ≤DKL(qœï(z‚à£x)‚à•ùí©(0,))‚èüregularization+Œ±‚à•y‚àíyÃÇ‚à•22‚èüregression. \\mathcal{L}(x,y) = \\underbrace{\\|x-\\hat x\\|_2^2}_{\\text{reconstruction}} \\;+\\; \\beta\\;\\underbrace{D_{KL}\\!\\left(q_\\phi(z\\mid x)\\,\\|\\,\\mathcal{N}(0,)\\right)}_{\\text{regularization}} \\;+\\; \\alpha\\;\\underbrace{\\|y-\\hat y\\|_2^2}_{\\text{regression}}. package API, correspond beta_kl = Œ≤ alpha_y = Œ±.","code":""},{"path":[]},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"cran-once-accepted","dir":"","previous_headings":"Installation","what":"CRAN (once accepted)","title":"soilVAE","text":"","code":"install.packages(\"soilVAE\")"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"development-version-github","dir":"","previous_headings":"Installation","what":"Development version (GitHub)","title":"soilVAE","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"HugoMachadoRodrigues/soilVAE\")"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"python--tensorflow-setup-that-does-not-surprise-the-user","dir":"","previous_headings":"","what":"Python / TensorFlow setup that does not surprise the user","title":"soilVAE","text":"deep learning depends external Python libraries, README uses defensive pattern: detect whether Python + TF/Keras available , show exactly create conda env using conda-forge run VAE environment ready Important: reticulate ‚Äúlocks‚Äù Python used per R session. change env variables use_*() calls, restart R.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"option-a-recommended-conda-env-conda-forge-only","dir":"","previous_headings":"Python / TensorFlow setup that does not surprise the user","what":"Option A (recommended): conda env (conda-forge only)","title":"soilVAE","text":"Now, R session:","code":"library(reticulate)  # Make sure reticulate isn't forced to a missing python Sys.unsetenv(\"RETICULATE_PYTHON\")  # Create env (if needed) if (!\"soilvae-tf\" %in% conda_list()$name) {   conda_create(\"soilvae-tf\", python_version = \"3.11\") }  # Install core deps from conda-forge conda_install(\"soilvae-tf\", packages = c(\"pip\", \"numpy\"), channel = \"conda-forge\")  # Install TF/Keras via pip inside the env py_install(c(\"tensorflow>=2.13\", \"keras>=3\"), pip = TRUE, envname = \"soilvae-tf\") library(soilVAE) soilVAE::vae_configure(conda = \"soilvae-tf\") reticulate::py_config()"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"option-b-point-to-an-existing-python-executable","dir":"","previous_headings":"Python / TensorFlow setup that does not surprise the user","what":"Option B: point to an existing Python executable","title":"soilVAE","text":"","code":"library(soilVAE) soilVAE::vae_configure(python = \"C:/path/to/python.exe\")"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"reproducible-case-study-spectra---pre-processing---pls-baseline---soilvae","dir":"","previous_headings":"","what":"Reproducible case study (spectra -> pre-processing -> PLS baseline -> soilVAE)","title":"soilVAE","text":"follows workflow style commonly used soil spectral inference tutorials (e.g., Wadoux et al., 2021) (Wadoux et al.¬†2021), direct comparison PLS baseline soilVAE.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"packages","dir":"","previous_headings":"Reproducible case study (spectra -> pre-processing -> PLS baseline -> soilVAE)","what":"Packages","title":"soilVAE","text":"","code":"set.seed(19101991)  pkgs <- c(\"prospectr\", \"pls\", \"reticulate\") for (p in pkgs) if (!requireNamespace(p, quietly = TRUE)) install.packages(p)  library(prospectr) library(pls) library(reticulate)  if (!requireNamespace(\"soilVAE\", quietly = TRUE)) {   stop(\"soilVAE is not installed. Install it with remotes::install_github('HugoMachadoRodrigues/soilVAE').\") } library(soilVAE)  # Defensive: detect Python + TF/Keras early, so the README can render everywhere. has_py <- reticulate::py_available(initialize = FALSE) has_tf <- FALSE if (has_py) {   try(reticulate::py_config(), silent = TRUE)   has_tf <- reticulate::py_module_available(\"tensorflow\") &&     reticulate::py_module_available(\"keras\") }"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"data","dir":"","previous_headings":"Reproducible case study (spectra -> pre-processing -> PLS baseline -> soilVAE)","what":"Data","title":"soilVAE","text":"example assumes ship datsoilspc inside package (data/datsoilspc.rda). dataset provided described Geeves et al.¬†(1995) Geeves, G. W. (Guy W.) & New South Wales. Department Conservation Land Management & CSIRO. Division Soils. (1995). physical, chemical morphological properties soils wheat-belt southern N.S.W. northern Victoria / G.W. Geeves ‚Ä¶ [et al.]. Glen Osmond, S. Aust. : CSIRO Division Soils Expected structure: datsoilspc$spc: matrix reflectance spectra (rows = samples; cols = wavelengths) datsoilspc$TotalCarbon: numeric target (example property)","code":"data(\"datsoilspc\", package = \"soilVAE\") str(datsoilspc) #> 'data.frame':    391 obs. of  5 variables: #>  $ clay       : num  49 7 56 14 53 24 9 18 33 27 ... #>  $ silt       : num  10 24 17 19 7 21 9 20 13 19 ... #>  $ sand       : num  42 69 27 67 40 55 83 61 54 55 ... #>  $ TotalCarbon: num  0.15 0.12 0.17 1.06 0.69 2.76 0.66 1.36 0.19 0.16 ... #>  $ spc        : num [1:391, 1:2151] 0.0898 0.1677 0.0778 0.0958 0.0359 ... #>   ..- attr(*, \"dimnames\")=List of 2 #>   .. ..$ : NULL #>   .. ..$ : chr [1:2151] \"350\" \"351\" \"352\" \"353\" ... #>  - attr(*, \"na.action\")= 'omit' Named int 392 #>   ..- attr(*, \"names\")= chr \"63\""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"utility-evaluation-metrics-base-r","dir":"","previous_headings":"","what":"Utility: evaluation metrics (base R)","title":"soilVAE","text":"replicate typical ‚Äúquantitative‚Äù metrics used soil spectroscopy: RMSE, MAE, R¬≤, bias (), RPIQ, RPD.","code":"eval_quant <- function(y, yhat) {   y <- as.numeric(y)   yhat <- as.numeric(yhat)    ok <- is.finite(y) & is.finite(yhat)   y <- y[ok]   yhat <- yhat[ok]    if (length(y) < 3) {     return(list(       n = length(y),       ME = NA_real_, MAE = NA_real_, RMSE = NA_real_,       R2 = NA_real_, RPIQ = NA_real_, RPD = NA_real_     ))   }    err <- yhat - y   me <- mean(err)   mae <- mean(abs(err))   rmse <- sqrt(mean(err^2))    ss_res <- sum((y - yhat)^2)   ss_tot <- sum((y - mean(y))^2)   r2 <- if (ss_tot == 0) NA_real_ else 1 - ss_res / ss_tot    rpiq <- stats::IQR(y) / rmse   rpd  <- stats::sd(y) / rmse    list(     n = length(y),     ME = me,     MAE = mae,     RMSE = rmse,     R2 = r2,     RPIQ = rpiq,     RPD = rpd   ) }  as_df_metrics <- function(x) {   data.frame(     n = x$n,     ME = round(x$ME, 2),     MAE = round(x$MAE, 2),     RMSE = round(x$RMSE, 2),     R2 = round(x$R2, 2),     RPIQ = round(x$RPIQ, 2),     RPD = round(x$RPD, 2),     stringsAsFactors = FALSE   ) }"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"plot-reflectance-spectra","dir":"","previous_headings":"","what":"Plot reflectance spectra","title":"soilVAE","text":"Raw reflectance spectra (datsoilspc$spc)","code":"matplot(   x = as.numeric(colnames(datsoilspc$spc)),   y = t(as.matrix(datsoilspc$spc)),   xlab = \"Wavelength / nm\",   ylab = \"Reflectance\",   ylim = c(0, 1),   type = \"l\",   lty = 1,   col = rgb(0.5, 0.5, 0.5, alpha = 0.3) )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"convert-reflectance-to-absorbance","dir":"","previous_headings":"","what":"Convert reflectance to absorbance","title":"soilVAE","text":"Absorbance spectra (datsoilspc$spcA)","code":"datsoilspc$spcA <- log(1 / as.matrix(datsoilspc$spc))  matplot(   x = as.numeric(colnames(datsoilspc$spcA)),   y = t(datsoilspc$spcA),   xlab = \"Wavelength / nm\",   ylab = \"Absorbance\",   ylim = c(0, 4),   type = \"l\",   lty = 1,   col = rgb(0.5, 0.5, 0.5, alpha = 0.3) )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"preprocessing-resample-5-nm--snv--moving-average","dir":"","previous_headings":"","what":"Preprocessing: resample (5 nm) + SNV + moving average","title":"soilVAE","text":"Preprocessed spectra (datsoilspc$spcAMovav)","code":"oldWavs <- as.numeric(colnames(datsoilspc$spcA)) newWavs <- seq(min(oldWavs), max(oldWavs), by = 5)  datsoilspc$spcARs <- prospectr::resample(   X = datsoilspc$spcA,   wav = oldWavs,   new.wav = newWavs,   interpol = \"linear\" )  datsoilspc$spcASnv <- prospectr::standardNormalVariate(datsoilspc$spcARs) datsoilspc$spcAMovav <- prospectr::movav(datsoilspc$spcASnv, w = 11)  wavs <- as.numeric(colnames(datsoilspc$spcAMovav))  matplot(   x = wavs,   y = t(datsoilspc$spcAMovav),   xlab = \"Wavelength / nm\",   ylab = \"Absorbance (SNV + movav)\",   type = \"l\",   lty = 1,   col = rgb(0.5, 0.5, 0.5, alpha = 0.3) )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"split-calibration-vs-validation","dir":"","previous_headings":"","what":"Split calibration vs validation","title":"soilVAE","text":"Calibration vs TEST splits (datC vs datV)","code":"set.seed(19101991)  calId <- sample(seq_len(nrow(datsoilspc)), size = round(0.75 * nrow(datsoilspc))) datC <- datsoilspc[calId, ] datV <- datsoilspc[-calId, ]  # <-- TEST  par(mfrow = c(1, 2)) hist(datC$TotalCarbon, main = \"Calibration (datC)\", xlab = \"Total carbon\") hist(datV$TotalCarbon, main = \"TEST (datV)\", xlab = \"Total carbon\") par(mfrow = c(1, 1))"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"baseline-model-pls","dir":"","previous_headings":"","what":"Baseline model: PLS","title":"soilVAE","text":"fit PLS calibration evaluate validation. PLS CV performance (datC)","code":"maxc <- 30  soilCPlsModel <- pls::plsr(   TotalCarbon ~ spcAMovav,   data = datC,   method = \"oscorespls\",   ncomp = maxc,   validation = \"CV\" )  plot(soilCPlsModel, \"val\", main = \"PLS CV performance (datC)\", xlab = \"Number of components\")"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"choose-number-of-components-example-uses-nc--14","dir":"","previous_headings":"","what":"Choose number of components (example uses nc = 14).","title":"soilVAE","text":"PLS predictions (datC + datV)","code":"nc <- 14  # Refit on full datC with chosen nc (PLS itself uses all comps up to maxc; prediction uses nc) soilCPlsPred_C <- as.numeric(predict(soilCPlsModel, ncomp = nc, newdata = datC$spcAMovav)) soilCPlsPred_T <- as.numeric(predict(soilCPlsModel, ncomp = nc, newdata = datV$spcAMovav))  par(mfrow = c(1, 2)) plot(datC$TotalCarbon, soilCPlsPred_C, xlab=\"Observed\", ylab=\"Predicted\", main=\"PLS (datC)\", pch=16); abline(0,1) plot(datV$TotalCarbon, soilCPlsPred_T, xlab=\"Observed\", ylab=\"Predicted\", main=\"PLS (TEST datV)\", pch=16); abline(0,1) par(mfrow = c(1, 1))"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"metrics-pls","dir":"","previous_headings":"","what":"Metrics (PLS)","title":"soilVAE","text":"use evaluation function used many soilspec workflows.","code":"pls_cal <- eval_quant(datC$TotalCarbon, soilCPlsPred_C) pls_tst <- eval_quant(datV$TotalCarbon, soilCPlsPred_T)  as_df_metrics(pls_cal) #>     n ME  MAE RMSE   R2 RPIQ  RPD #> 1 293  0 0.37 0.56 0.86 2.04 2.63 as_df_metrics(pls_tst) #>    n   ME  MAE RMSE   R2 RPIQ  RPD #> 1 98 0.02 0.36 0.52 0.69 2.34 1.81"},{"path":[]},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"availability-check-tensorflowkeras","dir":"","previous_headings":"","what":"Availability check (TensorFlow/Keras)","title":"soilVAE","text":"chunk detects Python + TensorFlow + Keras can loaded. available, VAE section skipped (vignette still builds).","code":"has_py <- reticulate::py_available(initialize = FALSE)  has_tf <- FALSE if (has_py) {   try(reticulate::py_config(), silent = TRUE)   has_tf <- reticulate::py_module_available(\"tensorflow\") &&             reticulate::py_module_available(\"keras\") }  has_py #> [1] TRUE has_tf #> [1] TRUE"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"prepare-matrices-same-predictors-as-pls-preprocessing","dir":"","previous_headings":"","what":"Prepare matrices (same predictors as PLS preprocessing)","title":"soilVAE","text":"Prepare Train/Val internal split within datC (y transform; scale X ) Prepare Train/Val internal split within datC (y transform; scale X ) model TotalCarbon using preprocessed spectra matrix spcAMovav.","code":"set.seed(19101991)  nC <- nrow(datC) id_tr <- sample(seq_len(nC), size = round(0.80 * nC)) datC_tr <- datC[id_tr, ] datC_va <- datC[-id_tr, ]  # y stays in original units (no transformation) y_tr <- as.numeric(datC_tr$TotalCarbon) y_va <- as.numeric(datC_va$TotalCarbon)  # X: scale predictors using TRAIN center/scale only X_tr_raw <- as.matrix(datC_tr$spcAMovav) X_va_raw <- as.matrix(datC_va$spcAMovav) X_te_raw <- as.matrix(datV$spcAMovav)   # TEST  X_tr <- scale(X_tr_raw) X_center <- attr(X_tr, \"scaled:center\") X_scale  <- attr(X_tr, \"scaled:scale\")  # safe scaling: avoid division by zero X_scale[X_scale == 0] <- 1  X_va <- scale(X_va_raw, center = X_center, scale = X_scale) X_te <- scale(X_te_raw, center = X_center, scale = X_scale)  # sanity checks (dims) dim(X_tr) #> [1] 234 421 length(y_tr) #> [1] 234 dim(X_va) #> [1]  59 421 length(y_va) #> [1] 59 dim(X_te) #> [1]  98 421"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"fit--evaluate-soilvae-skipped-if-tfkeras-unavailable","dir":"","previous_headings":"","what":"Fit + evaluate soilVAE (skipped if TF/Keras unavailable)","title":"soilVAE","text":"Train/Val splits soilVAE","code":"reticulate::py_run_string(\" import os import random import numpy as np import tensorflow as tf  os.environ['PYTHONHASHSEED'] = '0' random.seed(19101991) np.random.seed(19101991) tf.random.set_seed(19101991) \")  Sys.setenv(TF_DETERMINISTIC_OPS = \"1\") Sys.setenv(TF_CPP_MIN_LOG_LEVEL = \"2\")         # reduce logs INFO/WARN # Sys.setenv(TF_ENABLE_ONEDNN_OPTS = \"0\")  if (!has_tf) {   message(\"TensorFlow/Keras not available; skipping soilVAE section.\") } else {      Sys.setenv(TF_ENABLE_ONEDNN_OPTS=\"0\")      # Optional: force a specific python/venv/conda, if needed.   # soilVAE::vae_configure(conda = \"soilvae-tf\")    grid_vae <- data.frame(     latent_dim = c(8L, 16L, 32L, 64L),     dropout    = c(0.20, 0.30),     lr         = c(5e-4),     beta_kl    = c(0.01),     alpha_y    = c(5),     epochs     = c(500L),     batch_size = c(64L, 128L),     patience   = c(50L),     stringsAsFactors = FALSE   )    grid_vae$hidden_enc <- list(c(512L, 256L, 128L))   grid_vae$hidden_dec <- list(c(128L, 256L, 512L))    tuned <- soilVAE::tune_vae_train_val(     X_tr = X_tr, y_tr = y_tr,     X_va = X_va, y_va = y_va,     seed = 19101991,     grid_vae = grid_vae   )    best <- soilVAE::select_best_from_grid(tuned$tuning_df, selection_metric = \"euclid\")    cfg <- best$best    # Refit on full datC (train+val) using early stopping monitored on the internal val (datC_va)   m_vae <- soilVAE::vae_build(     input_dim  = ncol(X_tr),     hidden_enc = as.integer(strsplit(cfg$hidden_enc_str, \"-\")[[1]]),     hidden_dec = as.integer(strsplit(cfg$hidden_dec_str, \"-\")[[1]]),     latent_dim = as.integer(cfg$latent_dim),     dropout    = as.numeric(cfg$dropout),     lr         = as.numeric(cfg$lr),     beta_kl    = as.numeric(cfg$beta_kl),     alpha_y    = as.numeric(cfg$alpha_y)   )    soilVAE::vae_fit(     model = m_vae,     X = X_tr, y = y_tr,     X_val = X_va, y_val = y_va,     epochs = as.integer(cfg$epochs),     batch_size = as.integer(cfg$batch_size),     patience = as.integer(cfg$patience),     verbose = 0L   )    yhat_tr <- as.numeric(soilVAE::vae_predict(m_vae, X_tr))   yhat_va <- as.numeric(soilVAE::vae_predict(m_vae, X_va))   yhat_te <- as.numeric(soilVAE::vae_predict(m_vae, X_te))    # Metrics: internal train/val + FINAL TEST   vae_trn <- eval_quant(y_tr, yhat_tr)   vae_val <- eval_quant(y_va, yhat_va)   vae_tst <- eval_quant(as.numeric(datV$TotalCarbon), yhat_te)    # Plots   par(mfrow = c(1, 3))   plot(y_tr, yhat_tr, main=\"soilVAE (Train)\", xlab=\"Observed\", ylab=\"Predicted\", pch=16); abline(0,1)   plot(y_va, yhat_va, main=\"soilVAE (Val)\",   xlab=\"Observed\", ylab=\"Predicted\", pch=16); abline(0,1)   plot(as.numeric(datV$TotalCarbon), yhat_te, main=\"soilVAE (TEST datV)\", xlab=\"Observed\", ylab=\"Predicted\", pch=16); abline(0,1)   par(mfrow = c(1, 1)) }"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"compare-pls-vs-soilvae-test--datv","dir":"","previous_headings":"","what":"Compare PLS vs soilVAE (TEST = datV)","title":"soilVAE","text":"present compact comparison table. TensorFlow/Keras available, can still use PLS section install compatible Python stack later.","code":"if (!has_tf) {    tab <- rbind(     cbind(Model = \"PLS\", Split = \"Calibration (datC)\", as_df_metrics(pls_cal)),     cbind(Model = \"PLS\", Split = \"TEST (datV)\",        as_df_metrics(pls_tst))   )  } else {    tab <- rbind(     cbind(Model = \"PLS\",    Split = \"Calibration (datC)\", as_df_metrics(pls_cal)),     cbind(Model = \"PLS\",    Split = \"TEST (datV)\",        as_df_metrics(pls_tst)),     cbind(Model = \"soilVAE\",Split = \"Train (internal)\",   as_df_metrics(vae_trn)),     cbind(Model = \"soilVAE\",Split = \"Val (internal)\",     as_df_metrics(vae_val)),     cbind(Model = \"soilVAE\",Split = \"TEST (datV)\",        as_df_metrics(vae_tst))   )  }  row.names(tab) <- NULL tab #>     Model              Split   n    ME  MAE RMSE   R2 RPIQ  RPD #> 1     PLS Calibration (datC) 293  0.00 0.37 0.56 0.86 2.04 2.63 #> 2     PLS        TEST (datV)  98  0.02 0.36 0.52 0.69 2.34 1.81 #> 3 soilVAE   Train (internal) 234 -0.07 0.31 0.44 0.92 2.54 3.60 #> 4 soilVAE     Val (internal)  59 -0.10 0.33 0.51 0.76 2.36 2.04 #> 5 soilVAE        TEST (datV)  98 -0.04 0.33 0.47 0.74 2.56 1.97"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"notes-for-reproducibility","dir":"","previous_headings":"","what":"Notes for reproducibility","title":"soilVAE","text":"PLS workflow depends R packages pls prospectr. supervised VAE requires:","code":"-   Python (\\>= 3.9)  -   TensorFlow (\\>= 2.13)  -   Keras (\\>= 3)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/index.html","id":"notes-for-life","dir":"","previous_headings":"","what":"Notes for life","title":"soilVAE","text":"Education without ethics rhetoric. Power without reflection violence","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/datsoilspc.html","id":null,"dir":"Reference","previous_headings":"","what":"Soil spectroscopy example dataset used in the soilVAE vignettes ‚Äî datsoilspc","title":"Soil spectroscopy example dataset used in the soilVAE vignettes ‚Äî datsoilspc","text":"small soil spectroscopy dataset packaged soilVAE demonstrating typical spectral preprocessing (reflectance \\(\\rightarrow\\) absorbance, resampling, SNV, smoothing) comparing classic PLS baseline model supervised VAE regression via soilVAE.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/datsoilspc.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Soil spectroscopy example dataset used in the soilVAE vignettes ‚Äî datsoilspc","text":"data.frame list containing minimum: spc Numeric matrix/data.frame reflectance spectra (samples \\(\\times\\) wavelengths). TotalCarbon Numeric vector total carbon values.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/datsoilspc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Soil spectroscopy example dataset used in the soilVAE vignettes ‚Äî datsoilspc","text":"object datsoilspc contains: spc: numeric matrix (data.frame) reflectance spectra, rows samples columns wavelengths (nm). Column names interpretable numeric wavelengths. TotalCarbon: numeric vector soil total carbon content sample. Depending original source, additional columns may present (e.g., sample identifiers soil properties). dataset intended examples unit-sized demonstrations. meant comprehensive soil spectral library.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/datsoilspc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Soil spectroscopy example dataset used in the soilVAE vignettes ‚Äî datsoilspc","text":"","code":"data(\"datsoilspc\", package = \"soilVAE\") str(datsoilspc) #> 'data.frame':\t391 obs. of  5 variables: #>  $ clay       : num  49 7 56 14 53 24 9 18 33 27 ... #>  $ silt       : num  10 24 17 19 7 21 9 20 13 19 ... #>  $ sand       : num  42 69 27 67 40 55 83 61 54 55 ... #>  $ TotalCarbon: num  0.15 0.12 0.17 1.06 0.69 2.76 0.66 1.36 0.19 0.16 ... #>  $ spc        : num [1:391, 1:2151] 0.0898 0.1677 0.0778 0.0958 0.0359 ... #>   ..- attr(*, \"dimnames\")=List of 2 #>   .. ..$ : NULL #>   .. ..$ : chr [1:2151] \"350\" \"351\" \"352\" \"353\" ... #>  - attr(*, \"na.action\")= 'omit' Named int 392 #>   ..- attr(*, \"names\")= chr \"63\"  # basic plot of reflectance spectra spc <- as.matrix(datsoilspc$spc) wav <- as.numeric(colnames(spc)) matplot(wav, t(spc), type = \"l\", lty = 1,         xlab = \"Wavelength / nm\", ylab = \"Reflectance\")"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/select_best_from_grid.html","id":null,"dir":"Reference","previous_headings":"","what":"Select the best configuration from a tuning table ‚Äî select_best_from_grid","title":"Select the best configuration from a tuning table ‚Äî select_best_from_grid","text":"Select best configuration tuning table Select best configuration tuning table Select best configuration tuning table","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/select_best_from_grid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select the best configuration from a tuning table ‚Äî select_best_from_grid","text":"","code":"select_best_from_grid(   tuning_df,   selection_metric = c(\"euclid\", \"rmse\", \"r2\", \"rpiq\") )  select_best_from_grid(   tuning_df,   selection_metric = c(\"euclid\", \"rmse\", \"r2\", \"rpiq\") )  select_best_from_grid(   tuning_df,   selection_metric = c(\"euclid\", \"rmse\", \"r2\", \"rpiq\") )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/select_best_from_grid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select the best configuration from a tuning table ‚Äî select_best_from_grid","text":"tuning_df Data frame containing RMSE_val, R2_val, RPIQ_val. selection_metric One : \"euclid\", \"rmse\", \"r2\", \"rpiq\".","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/select_best_from_grid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select the best configuration from a tuning table ‚Äî select_best_from_grid","text":"list(best=one-row data.frame, best_score=numeric) List best (one-row data frame) best_score. List best (one-row data frame) best_score.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/soilVAE-package.html","id":null,"dir":"Reference","previous_headings":"","what":"soilVAE: Supervised Variational Autoencoder Regression (Keras/TensorFlow via reticulate) ‚Äî soilVAE-package","title":"soilVAE: Supervised Variational Autoencoder Regression (Keras/TensorFlow via reticulate) ‚Äî soilVAE-package","text":"soilVAE package provides supervised Variational Autoencoder (VAE) regression model tuning utilities high-dimensional predictors (e.g., soil spectroscopy).","code":""},{"path":[]},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/soilVAE-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"soilVAE: Supervised Variational Autoencoder Regression (Keras/TensorFlow via reticulate) ‚Äî soilVAE-package","text":"Maintainer: Hugo Rodrigues rodrigues.machado.hugo@gmail.com","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/tune_vae_train_val.html","id":null,"dir":"Reference","previous_headings":"","what":"Tune VAEReg on a Train/Validation split ‚Äî tune_vae_train_val","title":"Tune VAEReg on a Train/Validation split ‚Äî tune_vae_train_val","text":"Fits VAE one hyperparameter configurations given train/validation split returns tidy results table.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/tune_vae_train_val.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tune VAEReg on a Train/Validation split ‚Äî tune_vae_train_val","text":"","code":"tune_vae_train_val(X_tr, y_tr, X_va, y_va, seed = 123, grid_vae)  tune_vae_train_val(X_tr, y_tr, X_va, y_va, seed = 123, grid_vae)  tune_vae_train_val(X_tr, y_tr, X_va, y_va, seed = 123, grid_vae)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/tune_vae_train_val.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tune VAEReg on a Train/Validation split ‚Äî tune_vae_train_val","text":"X_tr Train predictors matrix. y_tr Train response numeric. X_va Validation predictors matrix. y_va Validation response numeric. seed Integer seed. grid_vae Data frame required columns: hidden_enc (list), hidden_dec (list), latent_dim, dropout, lr, beta_kl, alpha_y, epochs, batch_size, patience.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/tune_vae_train_val.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tune VAEReg on a Train/Validation split ‚Äî tune_vae_train_val","text":"list(grid=grid_vae, tuning_df=results) list : grid: input grid tuning_df: metrics per configuration list grid (input grid) tuning_df (metrics per config).","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_build.html","id":null,"dir":"Reference","previous_headings":"","what":"Build a supervised VAE regression model (VAEReg) ‚Äî vae_build","title":"Build a supervised VAE regression model (VAEReg) ‚Äî vae_build","text":"Build supervised VAE regression model (VAEReg) Build supervised VAE regression model (VAEReg)","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_build.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build a supervised VAE regression model (VAEReg) ‚Äî vae_build","text":"","code":"vae_build(   input_dim,   hidden_enc = c(512L, 256L),   hidden_dec = c(256L, 512L),   latent_dim = 32L,   dropout = 0.1,   lr = 0.001,   beta_kl = 1,   alpha_y = 1 )  vae_build(   input_dim,   hidden_enc = c(512L, 256L),   hidden_dec = c(256L, 512L),   latent_dim = 32L,   dropout = 0.1,   lr = 0.001,   beta_kl = 1,   alpha_y = 1 )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_build.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build a supervised VAE regression model (VAEReg) ‚Äî vae_build","text":"input_dim integer hidden_enc integer vector hidden_dec integer vector latent_dim integer dropout numeric lr numeric learning rate beta_kl numeric alpha_y numeric","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_build.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build a supervised VAE regression model (VAEReg) ‚Äî vae_build","text":"Python keras model object (VAEReg)","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_configure.html","id":null,"dir":"Reference","previous_headings":"","what":"Configure Python / reticulate for soilVAE ‚Äî vae_configure","title":"Configure Python / reticulate for soilVAE ‚Äî vae_configure","text":"Configure Python / reticulate soilVAE Configure Python / reticulate soilVAE Configure Python / reticulate soilVAE","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_configure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configure Python / reticulate for soilVAE ‚Äî vae_configure","text":"","code":"vae_configure(python = NULL, venv = NULL, conda = NULL)  vae_configure(python = NULL, venv = NULL, conda = NULL)  vae_configure(python = NULL, venv = NULL, conda = NULL)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_configure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configure Python / reticulate for soilVAE ‚Äî vae_configure","text":"python Path python executable (optional). venv Name virtualenv use (optional). conda Name conda env use (optional).","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_configure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Configure Python / reticulate for soilVAE ‚Äî vae_configure","text":"TRUE invisibly.","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_encode.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract latent embeddings (z) from VAEReg ‚Äî vae_encode","title":"Extract latent embeddings (z) from VAEReg ‚Äî vae_encode","text":"Extract latent embeddings (z) VAEReg Extract latent embeddings (z) VAEReg","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_encode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract latent embeddings (z) from VAEReg ‚Äî vae_encode","text":"","code":"vae_encode(model, X)  vae_encode(model, X)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_encode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract latent embeddings (z) from VAEReg ‚Äî vae_encode","text":"model Python VAEReg X matrix","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_encode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract latent embeddings (z) from VAEReg ‚Äî vae_encode","text":"matrix","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit VAEReg ‚Äî vae_fit","title":"Fit VAEReg ‚Äî vae_fit","text":"Fit VAEReg Fit VAEReg","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit VAEReg ‚Äî vae_fit","text":"","code":"vae_fit(   model,   X,   y,   X_val = NULL,   y_val = NULL,   epochs = 80L,   batch_size = 64L,   patience = 10L,   verbose = 0L )  vae_fit(   model,   X,   y,   X_val = NULL,   y_val = NULL,   epochs = 80L,   batch_size = 64L,   patience = 10L,   verbose = 0L )"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit VAEReg ‚Äî vae_fit","text":"model Python VAEReg object vae_build() X matrix (n x p) y numeric vector (n) X_val optional matrix y_val optional numeric vector epochs integer batch_size integer patience integer early stopping (validation provided) verbose 0/1/2","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_fit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit VAEReg ‚Äî vae_fit","text":"training history (Python object)","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict y using VAEReg (via latent z -> y_head) ‚Äî vae_predict","title":"Predict y using VAEReg (via latent z -> y_head) ‚Äî vae_predict","text":"Predict y using VAEReg (via latent z -> y_head) Predict y using VAEReg (via latent z -> y_head)","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict y using VAEReg (via latent z -> y_head) ‚Äî vae_predict","text":"","code":"vae_predict(model, X)  vae_predict(model, X)"},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict y using VAEReg (via latent z -> y_head) ‚Äî vae_predict","text":"model Python VAEReg X matrix","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/reference/vae_predict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict y using VAEReg (via latent z -> y_head) ‚Äî vae_predict","text":"numeric vector","code":""},{"path":"https://hugomachadorodrigues.github.io/soilVAE/news/index.html","id":"soilvae-010","dir":"Changelog","previous_headings":"","what":"soilVAE 0.1.0","title":"soilVAE 0.1.0","text":"Initial release. Supervised VAE regression model via Keras/TensorFlow reticulate. Exported API: vae_configure, vae_build, vae_fit, vae_predict, vae_encode, tune_vae_train_val, select_best_from_grid.","code":""}]
